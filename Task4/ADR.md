### **Название задачи:**

Передача ставок по депозитам в кол-центр и партнёрский кол-центр

### **Автор:**

Евгений Павлов

### **Дата:**

2025-05-12

---

### **Функциональные требования**

|  №  | Действующие лица или системы                   | Use Case                | Описание                                                                         |
| :-: | ---------------------------------------------- | ----------------------- | -------------------------------------------------------------------------------- |
|  1  | Сотрудник кол-центра, система кол-центра       | Просмотр текущих ставок | Получает актуальные ставки из централизованного хранилища банка                  |
|  2  | Система банка, система партнёрского кол-центра | Экспорт ставок в файл   | Система банка экспортирует актуальные ставки по шаблону в файл и передаёт внешне |
|  3  | Менеджер бэк-офиса                             | Актуализация ставок     | Вводит новые ставки в централизованную систему (вручную или через Excel)         |

---

### **Нефункциональные требования**

| № | Требование                                                                      |
| - | ------------------------------------------------------------------------------- |
| 1 | Безопасность передачи файлов: шифрование или VPN-туннель                        |
| 2 | Надёжность доступа кол-центра к справочнику ставок 24/7                         |
| 3 | Поддержка формата выгрузки, совместимого с партнёрской системой (например, CSV) |
| 4 | Упрощённый интерфейс отображения ставок в системе кол-центра                    |
| 5 | Централизованное хранилище ставок с правами доступа для разных ролей            |

---

### **Решение**

Диаграмма контекста (C4 - Context) и диаграмма контейнеров (C4 - Container) представлена в файле sprint9-z4.drawio.xml


#### Обоснование архитектурных решений:

* Централизованный справочник ставок обеспечивает единый источник истины;
* Кол-центр получает ставки напрямую через API или SQL-представление;
* Для партнёрского кол-центра используется асинхронный экспорт в файл, как было предложено;
* Используются доступные в банке технологии: MS SQL, Python-скрипт, REST API, CSV;
* Минимизируются изменения существующих систем (особенно для партнёров).

---

### **Альтернативы**

1. Сделать API-доступ и для партнёрского кол-центра:

   * ❌ Не поддерживается технически на стороне партнёра
2. Вести ставки в Excel и вручную пересылать:

   * ❌ Ошибки, рассинхронизация, трудоёмкость
3. Разработка отдельного микросервиса ставок:

   * ✅ На перспективу, но MVP требует более простой реализации

---

### **Недостатки, ограничения, риски**

* Периодичность передачи файла (например, 1 раз в час) создаёт риск рассинхронизации при срочных изменениях;
* Необходимо контролировать безопасность передачи и доступ к ставкам на стороне партнёра;
* Централизованная система ставок должна быть отказоустойчивой;
* Нужно предусмотреть права доступа по ролям внутри банка (отдел кредитования, депозиты, ИТ).

---

### **Список задач по системам**

#### 1. Внутренняя система справочника ставок:

* Разработать модель хранения ставок (MS SQL)
* Реализовать web-интерфейс (React или PHP)
* Настроить API или SQL view для кол-центра

#### 2. Система кол-центра:

* Подключение к справочнику ставок (чтение)
* Отображение ставок в интерфейсе оператора

#### 3. Экспорт ставок в файл:

* Создание Python- или ETL-скрипта генерации CSV
* Настройка расписания экспорта (cron)
* Тестирование совместимости формата с партнёром

#### 4. Безопасность:

* Настройка шифрования/канала передачи файлов (например, зашифрованный архив)
