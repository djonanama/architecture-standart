### **Название задачи:**

Архитектура MVP по открытию депозитов онлайн

### **Автор:**

Евгений Павлов

### **Дата:**

2025-05-11

---

### **Функциональные требования**

|  №  | Действующие лица или системы            | Use Case                 | Описание                                                                       |
| :-: | --------------------------------------- | ------------------------ | ------------------------------------------------------------------------------ |
|  1  | Клиент, Сайт                            | Подача заявки на депозит | Новый клиент вводит ФИО и телефон, данные отправляются в кол-центр             |
|  2  | Менеджер кол-центра, Система кол-центра | Обработка заявки         | Менеджер звонит клиенту, возможно согласование спецставки                      |
|  3  | Клиент, Интернет-банк                   | Подача заявки на депозит | Клиент выбирает депозит, указывает счёт и сумму, подтверждает заявку СМС-кодом |
|  4  | Менеджер бэк-офиса, АБС                 | Обработка заявки         | Менеджер вручную подтверждает ставку и открывает депозит в АБС                 |
|  5  | АБС, СМС-шлюз                           | Отправка уведомления     | После открытия депозита клиенту отправляется СМС                               |

---

### **Нефункциональные требования**

| № | Требование                                                                |
| - | ------------------------------------------------------------------------- |
| 1 | Безопасность: HTTPS, шифрование данных клиента                            |
| 2 | Надежность: отказоустойчивость и доступность 99.9%                        |
| 3 | Масштабируемость: горизонтальное масштабирование интернет-банка           |
| 4 | Совместимость: только проверенные технологии (MS SQL, Oracle, .NET, Java) |
| 5 | Не использовать прямые интеграции с АБС из интернет-банка                 |
| 6 | Удобство: быстрый отклик UI (до 200 мс), соответствие дизайн-системе      |
| 7 | Поддержка: наличие документации для API и новых компонентов               |

---

### **Решение**

Диаграмма контекста (C4 - Context) и диаграмма контейнеров (C4 - Container) представлена в файле sprint9-z3.drawio.xml


#### Обоснование архитектурных решений:

* Изоляция интернет-банка от АБС через очередь снижает риски перегрузки и сохраняет SLA;
* Используются только технологии, где есть внутренняя экспертиза (MS SQL, .NET, PL/SQL);
* Система кол-центра остаётся внешней, но взаимодействует через API;
* Возможность перевода интернет-банка на микросервисную модель начинается с модуля депозитов.

---

### **Альтернативы**

1. Прямая интеграция интернет-банка с АБС:

   * ❌ Высокие риски отказа, нагрузка на Oracle и отсутствие масштабируемости.

2. Использование Kafka:

   * ❌ Не поддерживается в текущей версии интернет-банка, потребуется глубокая модернизация.

3. Перевод всей обработки ставок в отдельный сервис:

   * ✅ Перспективно, но требует полной реорганизации процесса и безопасности данных между отделами.

---

### **Недостатки, ограничения, риски**

* Очередь сообщений требует мониторинга и поддержки, возможно — новых компетенций;
* АБС масштабируется только вертикально — риск в пиковые периоды;
* Передача ставок через XLS неустойчива — нужна стратегия по замене на справочник;
* Поддержка отказоустойчивости требует настройки балансировщиков и CI/CD для интернет-банка;
* MVP сохраняет ручную обработку в АБС, поэтому скорость обслуживания не улучшится радикально на первом этапе.
